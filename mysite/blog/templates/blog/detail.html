{% load static %}
<head>
  <title>Blog</title>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />

  <!-- **** layout stylesheet **** -->
  <link rel="stylesheet" type="text/css" href="{% static 'blog/style.css' %}" />

  <!-- **** colour scheme stylesheet **** -->
  <link rel="stylesheet" type="text/css" href="{% static 'blog/colour.css' %}" />

</head>

<body>
  <div id="main">
    <div id="links">
      <a href="{% url 'login' %}">Login</a> | <a href="{% url 'logout' %}">Logout</a>
    </div>
    <div id="logo"><h1>Blog</h1></div>
    <div id="content">
        <div id="menu">
        <ul>
          <li><a href="{% url 'blog:index'%}">home</a></li>
          <li><a href="{% url 'blog:article_add'%}">add</a></li>
            <li><a id="selected" href="#">detail</a></li>
            <li><a href="#">edit</a></li>
            <li><a href="{% url 'register' %}">register</a></li>
                        <li></li>
        </ul>
      </div>

        <div id="column1">
            <h1>hello {{ username }} ~ </h1>
            <div class="sidebaritem">
              <div class="sbihead">
                <h1>latest article</h1>
              </div>
                  <div class="sbicontent">
                      {% if article_list %}
                        {% for article in article_list %}
                           {% if not article.is_delete %}
                        <h2>{{ article.title }}</h2>
                        <p>{{ article.content|safe|slice:"0:20" }}</p>
                        <p><a href="{% url 'blog:detail' article.id %}">read more ...</a></p>
                           {% endif %}
                        {% endfor %}
                      {% else %}
                        <p>No polls are available.</p>
                      {% endif %}
                  </div>
            </div>
        </div>


    <div id="column2">
        {% if article %}
        <h1>{{ article.title }}</h1>{{ article.author }}  <div style="float:right"><a href="{% url 'blog:article_edit' article.id %}"><b>edit</b></a> | <a href="{% url 'blog:article_delete' article.id %}"><b>delete</b></a></div>
        <p>{{ article.content|safe }}</p>
        <h1>message</h1>
            {% for message in article.message_set.all %}
        <h2>{{ message.title }}  -  {{ message.author }}</h2>
        <p>{{ message.created_at |date:'Y-m-d H:i' }}</br>
                {{ message.content }}</p> </br>
            {% endfor %}
        {% else %}
            <p>No polls are available.</p>
        {% endif %}
        <h1>new message</h1>
        <form action="{% url 'blog:message_save' article.id %}" method="post">
            {% csrf_token %}
                 <div class="row">
                    <span class="formlabel">author</span>
                    <span class="forminput"><input type="text" name="author" value="{{ username }}"></span>
                </div>
                <div class="row">
                    <span class="formlabel">title</span>
                    <span class="forminput"><input type="text" name="title"></span>
                </div>
                <div class="row">
                    <span class="formlabel">content</span>
                    <span class="forminput"><textarea type="text" name="content" placeholder="Enter your content here..." rows="5"></textarea></span>
                </div>
                <div class="row">
                    <span class="formlabel"></span>
                    <span class="forminput"><input type="submit" value="submit" class="submit"></span>
                </div>
        </form>
    </div>
    </div>
  </div>
    <div id="footer">
      copyright &copy; 2006 your name | <a href="#">email@emailaddress</a> | <a href="http://validator.w3.org/check?uri=referer">XHTML 1.1</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> | <a href="http://www.dcarter.co.uk">design by dcarter</a>
    </div>
  </div>
</body>
</html>
<script>
    var error_msg = "{{ error_message }}";
    if (error_msg === undefined || error_msg === null || error_msg ==""){

    }else{
        alert(error_msg)
    }
</script>

